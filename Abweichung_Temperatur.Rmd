---
title: "R Notebook"
output: html_notebook
---
Funktion um Abweichung von der Monatlichen Durchschnittstemperatur zu errechnen

```{r}
temptest = vumsatz
temptest$Jahr = year(as.Date(temptest$Datum))
temptest$Monat = month(as.Date(temptest$Datum))

temptest$T_Abweichung = 0
for(j in 1:7){
  for(i in 1:12){
    for(k in 1:6){
      selected_data = temptest$Warengruppe == k & temptest$Jahr == 2012+j & temptest$Monat == i
      data = temptest[selected_data,]
      temp_mean = mean(data$Temperatur)
      temptest[selected_data,]$T_Abweichung = temptest[selected_data,]$Temperatur-temp_mean
    }
  }
}

vumsatz$T_Abweichung = temptest$T_Abweichung
```

